const fs=require('fs');

function copyFile(pathOrigen, pathDestino, w = "0") {

    try {
        if(!fs.statSync(pathOrigen).isFile()){
            console.log("pathOringen is not file")
            process.exit(-1)   
        }

        fs.accessSync(pathOrigen, fs.constants.R_OK)

        if(fs.existsSync(pathDestino)){

            console.log("pathDestino does not exist")

            if(w === "1"){
                fs.writeFile(pathDestino, "", (error) => {
                    if (error) {
                      console.error('Error writing to file:', error);
                    }
                })

            }else{
                console.log("w is 0, dont overwride")
                process.exit(-1)
            }
        }

        const origen=fs.createReadStream(pathOrigen);
        const destino=fs.createWriteStream(pathDestino);

        origen.pipe(destino);
        console.log("File writed")
            

    } catch (error) {
     console.error("Error: ", error.message)
     process.exit(-1)   
    }
    
}

module.exports = { copyFile }

/*
origen ==========> (proceso)  --+
                                |               
destino <========= (proceso)  --+
*/